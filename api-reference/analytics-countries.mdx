---
title: 'GET /analytics/countries'
api: 'GET https://api.vouch.expert/analytics/countries'
description: 'Get geographic distribution analytics for email validations'
---

## Overview

The `/analytics/countries` endpoint provides geographic insights into your email validations. Track which countries your users are validating emails from and identify regional patterns.

<Note>
  You can use either the versioned endpoint `/v1/analytics/countries` or the latest endpoint `/analytics/countries`
</Note>

## Authentication

<ParamField header="Authorization" type="string" required>
  Bearer token with your server API key

  ```
  Authorization: Bearer your_server_api_key_here
  ```
</ParamField>

<ParamField header="X-Project-Id" type="string" required>
  Your project ID

  ```
  X-Project-Id: your_project_id
  ```
</ParamField>

<Warning>
  This endpoint requires a **server API key**. Do not use client API keys for analytics endpoints.
</Warning>

## Query Parameters

<ParamField query="startDate" type="string">
  Start date in ISO 8601 format (defaults to 30 days ago)

  ```
  ?startDate=2024-01-01T00:00:00Z
  ```
</ParamField>

<ParamField query="endDate" type="string">
  End date in ISO 8601 format (defaults to now)

  ```
  ?endDate=2024-01-31T23:59:59Z
  ```
</ParamField>

<ParamField query="groupBy" type="string">
  Group results by time interval: `hour`, `day`, `week`, or `month` (defaults to `day`)

  ```
  ?groupBy=day
  ```
</ParamField>

<ParamField query="limit" type="number">
  Maximum number of countries to return (defaults to 50, max 250)

  ```
  ?limit=50
  ```
</ParamField>

<ParamField query="minValidations" type="number">
  Minimum number of validations required to include a country (defaults to 1)

  ```
  ?minValidations=10
  ```
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Whether the request was successful
</ResponseField>

<ResponseField name="data" type="object">
  Analytics data

  <Expandable title="properties">
    <ResponseField name="summary" type="object">
      Summary statistics for the time period

      <Expandable title="properties">
        <ResponseField name="totalValidations" type="number">
          Total number of email validations
        </ResponseField>

        <ResponseField name="totalCountries" type="number">
          Number of unique countries
        </ResponseField>

        <ResponseField name="topCountry" type="string">
          Country code (ISO 3166-1 alpha-2) with most validations
        </ResponseField>

        <ResponseField name="topCountryPercentage" type="number">
          Percentage of validations from top country
        </ResponseField>
      </Expandable>
    </ResponseField>

    <ResponseField name="countries" type="array">
      Country breakdown statistics (sorted by count descending)

      <Expandable title="properties">
        <ResponseField name="countryCode" type="string">
          ISO 3166-1 alpha-2 country code
        </ResponseField>

        <ResponseField name="countryName" type="string">
          Full country name
        </ResponseField>

        <ResponseField name="count" type="number">
          Number of validations from this country
        </ResponseField>

        <ResponseField name="percentage" type="number">
          Percentage of total validations
        </ResponseField>

        <ResponseField name="validCount" type="number">
          Number of valid emails from this country
        </ResponseField>

        <ResponseField name="invalidCount" type="number">
          Number of invalid emails from this country
        </ResponseField>

        <ResponseField name="validRate" type="number">
          Percentage of valid emails (0-100)
        </ResponseField>
      </Expandable>
    </ResponseField>

    <ResponseField name="timeSeries" type="array">
      Time-series data grouped by the specified interval

      <Expandable title="properties">
        <ResponseField name="timestamp" type="string">
          ISO 8601 timestamp for the interval
        </ResponseField>

        <ResponseField name="validations" type="number">
          Number of validations in this interval
        </ResponseField>

        <ResponseField name="countries" type="number">
          Number of unique countries in this interval
        </ResponseField>
      </Expandable>
    </ResponseField>

    <ResponseField name="continents" type="array">
      Continental distribution of validations

      <Expandable title="properties">
        <ResponseField name="continent" type="string">
          Continent name
        </ResponseField>

        <ResponseField name="count" type="number">
          Number of validations from this continent
        </ResponseField>

        <ResponseField name="percentage" type="number">
          Percentage of total validations
        </ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

## Example Request

<CodeGroup>
```bash cURL
curl -X GET "https://api.vouch.expert/analytics/countries?startDate=2024-01-01&endDate=2024-01-31&limit=10" \
  -H "Authorization: Bearer your_server_api_key" \
  -H "X-Project-Id: your_project_id"
```

```javascript JavaScript
const response = await fetch(
  'https://api.vouch.expert/analytics/countries?startDate=2024-01-01&endDate=2024-01-31&limit=10',
  {
    method: 'GET',
    headers: {
      'Authorization': 'Bearer your_server_api_key',
      'X-Project-Id': 'your_project_id',
    },
  }
);

const data = await response.json();
console.log(data);
```

```python Python
import requests

response = requests.get(
    'https://api.vouch.expert/analytics/countries',
    headers={
        'Authorization': 'Bearer your_server_api_key',
        'X-Project-Id': 'your_project_id',
    },
    params={
        'startDate': '2024-01-01',
        'endDate': '2024-01-31',
        'limit': 10,
    }
)

data = response.json()
print(data)
```
</CodeGroup>

## Example Response

```json
{
  "success": true,
  "data": {
    "summary": {
      "totalValidations": 15420,
      "totalCountries": 87,
      "topCountry": "US",
      "topCountryPercentage": 42.3
    },
    "countries": [
      {
        "countryCode": "US",
        "countryName": "United States",
        "count": 6523,
        "percentage": 42.3,
        "validCount": 6102,
        "invalidCount": 421,
        "validRate": 93.5
      },
      {
        "countryCode": "GB",
        "countryName": "United Kingdom",
        "count": 2134,
        "percentage": 13.8,
        "validCount": 1987,
        "invalidCount": 147,
        "validRate": 93.1
      },
      {
        "countryCode": "CA",
        "countryName": "Canada",
        "count": 1567,
        "percentage": 10.2,
        "validCount": 1456,
        "invalidCount": 111,
        "validRate": 92.9
      },
      {
        "countryCode": "AU",
        "countryName": "Australia",
        "count": 1205,
        "percentage": 7.8,
        "validCount": 1121,
        "invalidCount": 84,
        "validRate": 93.0
      },
      {
        "countryCode": "DE",
        "countryName": "Germany",
        "count": 892,
        "percentage": 5.8,
        "validCount": 823,
        "invalidCount": 69,
        "validRate": 92.3
      }
    ],
    "timeSeries": [
      {
        "timestamp": "2024-01-01T00:00:00Z",
        "validations": 523,
        "countries": 42
      },
      {
        "timestamp": "2024-01-02T00:00:00Z",
        "validations": 487,
        "countries": 38
      }
    ],
    "continents": [
      {
        "continent": "North America",
        "count": 8645,
        "percentage": 56.1
      },
      {
        "continent": "Europe",
        "count": 4321,
        "percentage": 28.0
      },
      {
        "continent": "Asia",
        "count": 1567,
        "percentage": 10.2
      },
      {
        "continent": "Oceania",
        "count": 887,
        "percentage": 5.7
      }
    ]
  }
}
```

## Use Cases

### 1. Geographic Heat Map

Create a heat map of user locations:

```javascript
const response = await fetch(
  'https://api.vouch.expert/analytics/countries',
  {
    headers: {
      'Authorization': 'Bearer your_server_api_key',
      'X-Project-Id': 'your_project_id',
    },
  }
);

const { data } = await response.json();

// Map countries to visualization library
const heatMapData = data.countries.map(country => ({
  code: country.countryCode,
  value: country.count,
  name: country.countryName,
}));

renderHeatMap(heatMapData);
```

### 2. Regional Performance Analysis

Analyze validation success rates by region:

```javascript
const { data } = await response.json();

// Find countries with low validation rates
const lowPerformingCountries = data.countries.filter(
  country => country.validRate < 85
);

if (lowPerformingCountries.length > 0) {
  console.warn('Low validation rates detected in:', lowPerformingCountries);
  // Investigate potential issues or fraud patterns
}
```

### 3. Market Expansion Planning

Identify growth opportunities:

```javascript
const { data } = await response.json();

// Find top 5 countries by validation count
const topMarkets = data.countries.slice(0, 5);

console.log('Top markets:', topMarkets.map(c => c.countryName));

// Analyze growth potential
const emergingMarkets = data.countries
  .filter(c => c.count > 100 && c.count < 1000)
  .sort((a, b) => b.validRate - a.validRate);

console.log('Emerging markets with high quality:', emergingMarkets);
```

### 4. Fraud Detection by Geography

Monitor suspicious patterns:

```javascript
const { data } = await response.json();

// Detect unusual geographic patterns
const suspiciousCountries = data.countries.filter(
  country => country.validRate < 50 && country.count > 100
);

if (suspiciousCountries.length > 0) {
  console.warn('Potential fraud detected from:', suspiciousCountries);
  // Implement additional verification for these regions
}
```

## Error Responses

<ResponseExample>
```json 401 Unauthorized
{
  "success": false,
  "error": "Invalid API key or project ID",
  "code": "UNAUTHORIZED"
}
```

```json 400 Bad Request
{
  "success": false,
  "error": "Invalid date range",
  "code": "INVALID_PARAMETERS"
}
```

```json 429 Rate Limit
{
  "success": false,
  "error": "Rate limit exceeded",
  "code": "RATE_LIMIT_EXCEEDED",
  "retryAfter": 60
}
```
</ResponseExample>

## Rate Limits

- **100 requests per minute** per project
- Rate limit headers included in response:
  - `X-RateLimit-Limit`: Maximum requests per window
  - `X-RateLimit-Remaining`: Remaining requests in current window
  - `X-RateLimit-Reset`: Unix timestamp when the window resets

## Best Practices

1. **Cache Results**: Geographic distribution changes slowly. Cache responses for 10-15 minutes.

2. **Use Filtering**: Use `minValidations` to filter out noise from countries with very few validations.

3. **Combine with IP Reputation**: Cross-reference geographic data with IP reputation checks for better fraud detection.

4. **Monitor Anomalies**: Set up alerts for sudden spikes in validations from unexpected countries.

5. **Privacy Compliance**: Ensure your use of geographic data complies with regional privacy laws (GDPR, CCPA, etc.).

## IP Geolocation

<Info>
  Country detection is based on the IP address used during validation. We use MaxMind GeoIP2 for accurate geolocation data with ~95% accuracy at the country level.
</Info>

## Data Retention

Analytics data is retained for **90 days**. For longer retention, export and store the data in your own systems.
